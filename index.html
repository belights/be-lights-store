<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒ¼ãƒãƒ³ã‚°æ•™å®¤ã‚°ãƒƒã‚ºæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        /* ï¼ˆå…ƒã®CSSãã®ã¾ã¾çœç•¥ï¼‰ */
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸº ãƒãƒ¼ãƒãƒ³ã‚°æ•™å®¤ã‚°ãƒƒã‚ºæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ  ğŸº</h1>
            <p>ãŠæ°—ã«å…¥ã‚Šã®ã‚°ãƒƒã‚ºã‚’é¸ã‚“ã§ã”æ³¨æ–‡ãã ã•ã„</p>
        </header>

        <div class="products-grid" id="products-grid"></div>

        <div class="customer-form">
            <h2>æ³¨æ–‡è€…æƒ…å ±</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>ãŠåå‰ <span class="required">*</span></label>
                    <input type="text" id="customer-name" placeholder="å±±ç”°å¤ªéƒ">
                </div>
                <div class="form-group">
                    <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
                    <input type="email" id="customer-email" placeholder="example@email.com">
                </div>
                <div class="form-group">
                    <label>é›»è©±ç•ªå·</label>
                    <input type="tel" id="customer-phone" placeholder="090-1234-5678">
                </div>
            </div>
        </div>

        <div class="order-summary">
            <h2>æ³¨æ–‡å†…å®¹</h2>
            <div id="order-items"></div>
            <div class="total-section" id="total-section" style="display: none;">
                <div class="total-amount">
                    <span class="total-label">åˆè¨ˆé‡‘é¡:</span>
                    <span class="total-value" id="total-amount">Â¥0</span>
                </div>
                <button class="order-btn" onclick="completeOrder()">æ³¨æ–‡ã‚’ç¢ºå®šã™ã‚‹</button>
            </div>
        </div>
    </div>

    <div class="success-modal" id="success-modal" style="display: none;">
        <div class="success-content">
            <div class="success-icon">âœ“</div>
            <h2>æ³¨æ–‡å®Œäº†ï¼</h2>
            <p>ã”æ³¨æ–‡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚<br>ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã„ãŸã—ã¾ã—ãŸã€‚</p>
            <div id="order-details"></div>
            <button class="new-order-btn" onclick="startNewOrder()">æ–°ã—ã„æ³¨æ–‡ã‚’é–‹å§‹</button>
        </div>
    </div>

    <script>
        const products = [
            { id: 1, name: 'ç¼¶ãƒãƒƒã‚¸', basePrice: 200, image: 'https://example.com/badge.jpg' },
            { id: 2, name: 'ã‚·ãƒ¼ãƒ«', basePrice: 100, image: 'https://example.com/sticker.jpg' },
            { id: 3, name: 'ãƒ©ãƒ³ãƒãƒãƒƒã‚°', basePrice: 650, image: 'https://example.com/lunchbag.jpg' },
            { id: 4, name: 'å·¾ç€ï¼ˆå°ï¼‰', basePrice: 500, image: 'https://example.com/pouch.jpg' },
            { id: 5, name: 'ã‚¹ã‚¦ã‚§ãƒƒãƒˆãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼(æ˜¥å¤ç”¨)', basePrice: 3000, hasSize: true, sizes: ['S','M','L','XL'], image: 'https://example.com/sweatshirt.jpg' },
            { id: 6, name: 'ã‚¹ã‚¦ã‚§ãƒƒãƒˆãƒ‘ãƒ³ãƒ„(æ˜¥å¤ç”¨)', basePrice: 4000, hasSize: true, sizes: ['S','M','L','XL'], image: 'https://example.com/sweatpants.jpg' }
        ];

        let cart = {};

        function renderProducts() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';

            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                const cartItem = cart[product.id] || { quantity: 0, size: product.hasSize ? product.sizes[0] : null };
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">Â¥${product.basePrice.toLocaleString()}</p>
                        ${product.hasSize ? `<label>ã‚µã‚¤ã‚º:
                            <select id="size-${product.id}" onchange="updateSize(${product.id}, this.value)">
                                ${product.sizes.map(size => `<option value="${size}" ${cartItem.size === size ? 'selected' : ''}>${size}</option>`).join('')}
                            </select>
                        </label>` : ''}
                        <div class="quantity-controls">
                            <div class="quantity-buttons">
                                <button class="quantity-btn minus" onclick="removeFromCart(${product.id})" ${cartItem.quantity === 0 ? 'disabled' : ''}>âˆ’</button>
                                <span class="quantity-display">${cartItem.quantity}</span>
                                <button class="quantity-btn plus" onclick="addToCart(${product.id})">+</button>
                            </div>
                        </div>
                    </div>`;
                grid.appendChild(productCard);
            });
        }

        function updateSize(productId, size) {
            if (!cart[productId]) {
                cart[productId] = { quantity: 0, size };
            } else {
                cart[productId].size = size;
            }
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const size = product.hasSize ? document.getElementById(`size-${productId}`).value : null;

            if (!cart[productId]) cart[productId] = { quantity: 0, size };
            cart[productId].quantity += 1;
            if (size) cart[productId].size = size;

            renderProducts();
            renderOrderSummary();
        }

        function removeFromCart(productId) {
            if (cart[productId]?.quantity > 1) {
                cart[productId].quantity--;
            } else {
                delete cart[productId];
            }
            renderProducts();
            renderOrderSummary();
        }

        function renderOrderSummary() {
            const orderItems = document.getElementById('order-items');
            const totalSection = document.getElementById('total-section');

            if (Object.keys(cart).length === 0) {
                orderItems.innerHTML = '<div class="empty-cart">å•†å“ã‚’é¸æŠã—ã¦ãã ã•ã„</div>';
                totalSection.style.display = 'none';
                return;
            }

            let itemsHTML = '';
            let total = 0;

            Object.entries(cart).forEach(([id, entry]) => {
                const product = products.find(p => p.id === parseInt(id));
                const itemTotal = product.basePrice * entry.quantity;
                total += itemTotal;

                itemsHTML += `
                    <div class="order-item">
                        <div class="item-info">
                            <img src="${product.image}" alt="${product.name}" class="item-image">
                            <div class="item-details">
                                <h4>${product.name}</h4>
                                <p>Â¥${product.basePrice.toLocaleString()} Ã— ${entry.quantity}${entry.size ? ` / ã‚µã‚¤ã‚º: ${entry.size}` : ''}</p>
                            </div>
                        </div>
                        <div class="item-total">Â¥${itemTotal.toLocaleString()}</div>
                    </div>`;
            });

            orderItems.innerHTML = itemsHTML;
            document.getElementById('total-amount').textContent = `Â¥${total.toLocaleString()}`;
            totalSection.style.display = 'block';
        }

        function completeOrder() {
            const name = document.getElementById('customer-name').value;
            const email = document.getElementById('customer-email').value;
            const phone = document.getElementById('customer-phone').value;

            if (!name || !email) {
                alert('ãŠåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            if (Object.keys(cart).length === 0) {
                alert('å•†å“ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            const total = Object.entries(cart).reduce((sum, [productId, entry]) => {
                const product = products.find(p => p.id === parseInt(productId));
                return sum + (product.basePrice * entry.quantity);
            }, 0);

            document.getElementById('order-details').innerHTML = `
                <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h3>æ³¨æ–‡è©³ç´°</h3>
                    <p><strong>æ³¨æ–‡è€…:</strong> ${name}</p>
                    <p><strong>ãƒ¡ãƒ¼ãƒ«:</strong> ${email}</p>
                    ${phone ? `<p><strong>é›»è©±:</strong> ${phone}</p>` : ''}
                    <p style="font-size: 1.2rem; font-weight: bold; color: #2196f3; margin-top: 10px;">
                        <strong>åˆè¨ˆé‡‘é¡: Â¥${total.toLocaleString()}</strong>
                    </p>
                </div>`;

            document.getElementById('success-modal').style.display = 'flex';
        }

        function startNewOrder() {
            cart = {};
            document.getElementById('customer-name').value = '';
            document.getElementById('customer-email').value = '';
            document.getElementById('customer-phone').value = '';
            document.getElementById('success-modal').style.display = 'none';
            renderProducts();
            renderOrderSummary();
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            renderOrderSummary();
        });
    </script>
</body>
</html>
